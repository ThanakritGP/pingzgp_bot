import express from 'express';
import {
  ActionRowBuilder,
  ButtonBuilder,
  ButtonStyle,
  Client,
  Events,
  EmbedBuilder,
  GatewayIntentBits,
  REST,
  Routes
} from 'discord.js';
import dotenv from 'dotenv';
import fetch from 'node-fetch';

dotenv.config();

const app = express();
const port = process.env.PORT || 4000;

app.get('/', (req, res) => {
  res.send('Bot is Working!');
});

app.listen(port, () => {
  console.log(`Server is running on port ${port}`);
});

// Define the commands
const commands = [{
    name: 'menu',
    description: 'Random Foodüçï',
  },
  {
    name: 'dessert-menu',
    description: 'Random Dessertü•û',
  },
  {
    name: 'event',
    description: 'üìÖ ‡∏î‡∏π‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å Google Calendar'
  },
  {
    name: 'yen-to-thb',
    description: '‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏¢‡∏ô ‡πÄ‡∏õ‡πá‡∏ô ‡∏ö‡∏≤‡∏ó',
    options: [
      {
        name: 'amount',
        type: 10, // TYPE_NUMBER
        description: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á',
        required: true
      }
    ]
  }
];

// Register commands using REST API
const rest = new REST({
  version: '10'
}).setToken(process.env.TOKEN);

(async () => {
  try {
    console.log('Started refreshing application (/) commands.');

    // Register commands to the Discord API
    await rest.put(Routes.applicationCommands(process.env.CLIENT_ID), {
      body: commands
    });

    console.log('Successfully reloaded application (/) commands.');
  } catch (error) {
    console.error(error);
  }
})();

// Initialize the client
const client = new Client({
  intents: [GatewayIntentBits.Guilds]
});

// Define the menus
const menu = [
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î", "‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤", "‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏Å‡∏∏‡πâ‡∏á", "‡∏ú‡∏±‡∏î‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á", "‡πÑ‡∏Ç‡πà‡πÄ‡∏à‡∏µ‡∏¢‡∏ß",
  "‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π", "‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏´‡∏°‡∏π", "‡πÑ‡∏Ç‡πà‡∏û‡∏∞‡πÇ‡∏•‡πâ", "‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå", "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤",
  "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö‡∏ú‡∏±‡∏î‡∏û‡∏£‡∏¥‡∏Å‡πÄ‡∏Å‡∏•‡∏∑‡∏≠", "‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î", "‡∏£‡∏≤‡πÄ‡∏°‡∏á", "‡πÑ‡∏Ç‡πà‡∏î‡∏≤‡∏ß",
  "KFC", "McDonalds", "Nobicha", "‡∏Å‡∏∏‡πâ‡∏á‡∏≠‡∏ö‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô", "‡πÑ‡∏Ç‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏∞",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà", "‡∏û‡∏≤‡∏™‡∏ï‡πâ‡∏≤", "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏Ñ‡∏≤‡πÇ‡∏ö‡∏ô‡∏≤‡∏£‡∏≤", "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏ú‡∏±‡∏î‡∏Ç‡∏µ‡πâ‡πÄ‡∏°‡∏≤",
  "‡∏™‡πâ‡∏°‡∏ï‡∏≥", "‡∏Ñ‡∏±‡∏ï‡∏™‡∏∂‡∏î‡πâ‡∏á", "‡∏•‡∏≤‡∏ã‡∏≤‡∏ô‡∏ç‡πà‡∏≤", "‡∏ó‡∏á‡∏Ñ‡∏±‡∏ï‡∏™‡∏∂", "‡πÄ‡∏Å‡∏µ‡πâ‡∏¢‡∏ß‡∏ã‡πà‡∏≤",
  "‡∏ó‡∏≤‡πÇ‡∏Å‡∏∞‡∏¢‡∏≤‡∏Å‡∏¥", "‡∏Å‡∏∏‡πâ‡∏á‡πÄ‡∏ó‡∏°‡∏õ‡∏∏‡∏£‡∏∞", "‡∏¢‡∏≤‡∏Å‡∏¥‡πÇ‡∏ó‡∏£‡∏¥", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ç‡∏≤‡∏´‡∏°‡∏π", "‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏Å‡∏á‡∏Å‡∏∞‡∏´‡∏£‡∏µ‡πà",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡πÅ‡∏î‡∏á", "‡∏ö‡∏∞‡∏´‡∏°‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πä‡∏¢‡∏ß", "‡∏¢‡∏≥‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô", "‡∏õ‡∏π‡∏ú‡∏±‡∏î‡∏ú‡∏á‡∏Å‡∏£‡∏∞‡∏´‡∏£‡∏µ‡πà",
  "‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á", "‡∏´‡∏°‡∏π‡∏™‡∏∞‡πÄ‡∏ï‡πä‡∏∞", "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô", "‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á", "‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡∏£‡∏µ‡∏¢‡∏ö‡∏õ‡∏≤‡∏Å‡∏´‡∏°‡πâ‡∏≠",
  "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏£‡∏∑‡∏≠", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏°", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏û‡∏±‡∏ã‡∏ã‡πà‡∏≤", "‡∏ó‡∏≤‡∏£‡πå‡∏ï‡πÑ‡∏Ç‡πà", "‡∏Ç‡∏ô‡∏°‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á",
  "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏π", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢", "‡∏Å‡∏∏‡πâ‡∏á‡∏≠‡∏ö‡∏ã‡∏≠‡∏™", "‡∏ó‡∏≠‡∏î‡∏°‡∏±‡∏ô‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏≤‡∏¢", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏õ‡∏π",
  "‡∏™‡πÄ‡∏ï‡πä‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠", "‡∏ä‡∏≤‡∏ö‡∏π", "‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏î‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π", "‡πÄ‡∏Å‡∏≤‡πÄ‡∏´‡∏•‡∏≤", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á",
  "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á", "‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á", "‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å", "‡πÄ‡∏Å‡∏≤‡πÄ‡∏´‡∏•‡∏≤‡∏´‡∏°‡∏π", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ñ‡∏•‡∏∏‡∏Å‡∏Å‡∏∞‡∏õ‡∏¥",
  "‡∏™‡∏•‡∏±‡∏î", "‡∏™‡πÄ‡∏ï‡πä‡∏Å‡∏´‡∏°‡∏π", "‡πÅ‡∏Æ‡∏°‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå", "‡πÑ‡∏Å‡πà‡∏Å‡∏£‡∏≠‡∏ö", "‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ä",
  "‡∏Ñ‡∏≤‡πÇ‡∏ö‡∏ô‡∏≤‡∏£‡πà‡∏≤", "‡∏Å‡∏∏‡πâ‡∏á‡πÄ‡∏ú‡∏≤", "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô‡∏ô‡πâ‡∏≥‡∏¢‡∏≤", "‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡∏£‡∏µ‡∏¢‡∏ö", "‡πÑ‡∏Ç‡πà‡πÄ‡∏à‡∏µ‡∏¢‡∏ß‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö",
  "‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π", "‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ç‡∏≤‡∏´‡∏°‡∏π", "‡∏Å‡πã‡∏ß‡∏¢‡∏à‡∏±‡πä‡∏ö", "‡∏ú‡∏±‡∏î‡πÑ‡∏ó",
  "‡∏´‡∏°‡∏π‡∏ä‡∏∏‡∏õ‡πÅ‡∏õ‡πâ‡∏á‡∏ó‡∏≠‡∏î", "‡∏Å‡∏∏‡πâ‡∏á‡∏ú‡∏±‡∏î‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π", "‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ", "‡∏™‡∏•‡∏±‡∏î‡∏ú‡∏•‡πÑ‡∏°‡πâ",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î", "‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô", "‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á", "‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ã‡∏≠‡∏¢", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏°‡∏õ‡∏•‡∏≤", "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î", "‡∏ï‡πâ‡∏°‡∏Ç‡πà‡∏≤‡πÑ‡∏Å‡πà",
  "‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á", "‡∏•‡∏≤‡∏ö‡πÑ‡∏Å‡πà", "‡∏°‡∏±‡∏Å‡∏Å‡∏∞‡πÇ‡∏£‡∏ô‡∏µ", "‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á", "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏û‡∏∞‡πÅ‡∏ô‡∏á", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏£‡∏≤‡∏î‡πÅ‡∏Å‡∏á", "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏Ñ‡∏±‡πà‡∏ß‡πÑ‡∏Å‡πà", "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏´‡∏°‡∏π", "‡∏ú‡∏±‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏´‡∏°‡∏µ‡πà",
  "‡∏™‡πâ‡∏°‡∏ï‡∏≥‡∏õ‡∏π‡∏õ‡∏•‡∏≤‡∏£‡πâ‡∏≤", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡πà‡∏≠‡πÉ‡∏ö‡∏ö‡∏±‡∏ß", "‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î", "‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á", "‡∏ó‡∏≠‡∏î‡∏°‡∏±‡∏ô‡∏Å‡∏∏‡πâ‡∏á",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏•‡πà‡∏≠‡∏á", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ç‡∏≤‡∏´‡∏°‡∏π‡πÇ‡∏ö‡∏£‡∏≤‡∏ì", "‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß", "‡∏´‡∏°‡∏π‡∏ï‡∏∏‡πã‡∏ô", "‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏≠‡∏ö",
  "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏ï‡πâ‡∏°‡∏¢‡∏≥", "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏õ‡∏•‡∏≤‡∏ó‡∏π", "‡πÅ‡∏Å‡∏á‡πÄ‡∏ú‡πá‡∏î‡πÑ‡∏Å‡πà",
  "‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠", "‡∏™‡∏ï‡∏π‡∏ß‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠", "‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏°", "‡∏™‡∏•‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏õ‡∏•‡∏≤", "‡∏™‡∏ï‡∏π‡∏ß‡πå‡πÑ‡∏Å‡πà", "‡∏ú‡∏±‡∏î‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏û‡∏£‡∏¥‡∏Å‡∏´‡∏¢‡∏ß‡∏Å",
  "‡∏™‡∏•‡∏±‡∏î‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô", "‡∏ö‡∏∞‡∏´‡∏°‡∏µ‡πà‡πÑ‡∏Ç‡πà", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡πÑ‡∏Ç‡πà‡πÄ‡∏Ñ‡πá‡∏°"
];

const dessertMenu = [
  "‡∏ö‡∏¥‡∏á‡∏ã‡∏π‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡∏£‡∏µ", "‡∏ö‡∏¥‡∏á‡∏ã‡∏π‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á", "‡∏ö‡∏¥‡∏á‡∏ã‡∏π‡πÅ‡∏ï‡∏á‡πÇ‡∏°", "‡∏ö‡∏¥‡∏á‡∏ã‡∏π‡πÄ‡∏°‡∏•‡∏≠‡∏ô",
  "‡∏ö‡∏¥‡∏á‡∏ã‡∏π‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", "‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà", "‡∏Ñ‡∏∏‡πâ‡∏Å‡∏Å‡∏µ‡πâ", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡πâ‡∏°", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï",
  "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏Å‡∏≤‡πÅ‡∏ü", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ", "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ö", "‡∏ó‡∏≤‡∏£‡πå‡∏ï‡πÑ‡∏Ç‡πà", "‡∏Ñ‡∏£‡∏±‡∏ß‡∏ã‡∏≠‡∏á‡∏ï‡πå",
  "‡πÇ‡∏î‡∏ô‡∏±‡∏ó", "‡∏Ñ‡∏±‡∏û‡πÄ‡∏Ñ‡πâ‡∏Å", "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°", "‡∏Ç‡∏ô‡∏°‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á", "‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï‡∏ü‡∏≠‡∏á‡∏î‡∏π",
  "‡∏û‡∏≤‡∏¢‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•", "‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å", "‡∏Ñ‡∏∏‡∏Å‡∏Å‡∏µ‡πâ‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï‡∏ä‡∏¥‡∏õ", "‡∏û‡∏∏‡∏î‡∏î‡∏¥‡πâ‡∏á",
  "‡∏°‡∏π‡∏™‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á", "‡πÄ‡∏Ñ‡∏£‡∏õ‡πÄ‡∏Ñ‡πâ‡∏Å", "‡∏°‡∏±‡∏ü‡∏ü‡∏¥‡∏ô", "‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï‡∏°‡∏π‡∏™", "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",
  "‡∏ß‡∏≤‡∏ü‡πÄ‡∏ü‡∏¥‡∏•", "‡πÄ‡∏Ñ‡∏£‡∏õ", "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ", "‡∏Ñ‡∏±‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏î", "‡∏û‡∏≤‡∏¢‡πÄ‡∏•‡∏°‡∏≠‡∏ô",
  "‡∏û‡∏≤‡∏¢‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ", "‡∏Ñ‡∏±‡∏û‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï", "‡∏ö‡∏≤‡∏ô‡∏≠‡∏ü‡∏ü‡∏µ‡πà‡∏û‡∏≤‡∏¢", "‡∏û‡∏≤‡∏¢‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß",
  "‡∏û‡∏≤‡∏¢‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á", "‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ", "‡πÄ‡∏ö‡πÄ‡∏Å‡∏≠‡∏£‡∏µ‡πà", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß",
  "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ö‡∏•‡∏π‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ß‡∏ô‡∏¥‡∏•‡∏•‡∏≤", "‡∏û‡∏≤‡∏¢‡∏™‡πâ‡∏°", "‡πÇ‡∏£‡∏•‡πÄ‡∏Ñ‡πâ‡∏Å", "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡∏ú‡∏•‡πÑ‡∏°‡πâ",
  "‡∏û‡∏±‡∏ü‡πÅ‡∏õ‡πâ‡∏á", "‡∏Ñ‡∏£‡∏µ‡∏°‡∏ö‡∏£‡∏π‡πÄ‡∏•‡πà", "‡πÇ‡∏ü‡∏•‡∏ï", "‡∏°‡∏¥‡∏•‡∏Ñ‡πå‡πÄ‡∏ä‡∏Ñ", "‡∏Æ‡∏±‡∏ô‡∏ô‡∏µ‡πà‡πÇ‡∏ó‡∏™‡∏ï‡πå", "‡∏ó‡∏≤‡∏£‡πå‡∏ï‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß",
  "‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï‡πÄ‡∏Ñ‡πâ‡∏Å", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á", "‡∏Ñ‡∏∏‡πâ‡∏Å‡∏Å‡∏µ‡πâ‡πÄ‡∏ô‡∏¢", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏ô‡πâ‡∏≥‡∏´‡∏≠‡∏°",
  "‡∏ö‡∏±‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏Ñ‡πâ‡∏Å", "‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï", "‡∏Ñ‡∏∏‡∏Å‡∏Å‡∏µ‡πâ‡πÇ‡∏≠‡πä‡∏ï", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡πâ‡∏°‡πÇ‡∏≠",
  "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡πÇ‡∏Å‡πÇ‡∏Å‡πâ", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏°‡∏∞‡∏ô‡∏≤‡∏ß", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏Å‡∏≤‡πÅ‡∏ü‡∏°‡∏≠‡∏Ñ‡∏Ñ‡πà‡∏≤",
  "‡∏ó‡∏≠‡∏á‡∏´‡∏¢‡∏≠‡∏î", "‡∏•‡∏≠‡∏¢‡πÅ‡∏Å‡πâ‡∏ß", "‡∏ö‡∏±‡∏ß‡∏•‡∏≠‡∏¢",
  "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ó‡∏≠‡∏î", "‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å‡∏ó‡∏≠‡∏î", "‡∏ó‡∏±‡∏ö‡∏ó‡∏¥‡∏°‡∏Å‡∏£‡∏≠‡∏ö", "‡∏ù‡∏≠‡∏¢‡∏ó‡∏≠‡∏á",
  "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏ô‡∏¢", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏á‡∏≤‡∏î‡∏≥", "‡∏Ñ‡∏∏‡∏Å‡∏Å‡∏µ‡πâ‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏≠‡πä‡∏ï", "‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å",
  "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡∏Å‡∏∞‡∏ó‡∏¥", "‡∏•‡∏π‡∏Å‡∏ä‡∏∏‡∏ö", "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ü‡∏£‡∏∏‡πä‡∏ï‡πÄ‡∏Ñ‡πâ‡∏Å",
  "‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ô‡∏°‡∏™‡∏î", "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏™‡∏±‡∏á‡∏Ç‡∏¢‡∏≤",
];


// Client Ready Event
client.on(Events.ClientReady, readyClient => {
  console.log(`Logged in as ${readyClient.user.tag}!`);

  readyClient.user.setActivity('‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å User', {
    type: 3
  });
});


// Interaction Create Event
client.on(Events.InteractionCreate, async interaction => {
  if (!interaction.isChatInputCommand()) return;

  if (interaction.commandName === 'menu') {
    client.user.setActivity('‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£', {
      type: 0
    });
    const food = menu[Math.floor(Math.random() * menu.length)];
    await interaction.reply(`üçΩÔ∏è ‡πÄ‡∏°‡∏ô‡∏π : **${food}**`);
    // ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏î‡∏¥‡∏°
    setTimeout(() => {
      client.user.setActivity('‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å User', {
        type: 3
      });
    }, 3000);
  }

  if (interaction.commandName === 'dessert-menu') {
    client.user.setActivity('‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏ô‡∏°‡∏´‡∏ß‡∏≤‡∏ô', {
      type: 0
    });
    const dessert = dessertMenu[Math.floor(Math.random() * dessertMenu.length)];
    await interaction.reply(`üç∞ ‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏ô‡∏°‡∏´‡∏ß‡∏≤‡∏ô : **${dessert}**`);
    // ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏î‡∏¥‡∏°
    setTimeout(() => {
      client.user.setActivity('‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å User', {
        type: 3
      });
    }, 3000);
  }

  if (!interaction.isCommand()) return;

  if (interaction.commandName === 'event') {
    client.user.setActivity('‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°', {
      type: 3
    });
    const calendarId = process.env.CALENDAR_ID;
    const apiKey = process.env.GOOGLE_API_KEY;
    const timeMin = new Date().toISOString();
    const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?key=${apiKey}&timeMin=${timeMin}&singleEvents=true&orderBy=startTime&maxResults=50`;

    const res = await fetch(url);
    const data = await res.json();

    if (!data.items || data.items.length === 0) {
      return interaction.reply('üì≠ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á');
    }

    // ‡πÅ‡∏ö‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏∞ 5
    const events = data.items;
    const pages = Math.ceil(events.length / 5);
    let currentPage = 0;

    const getEmbed = (page) => {
      const embed = new EmbedBuilder()
        .setTitle('üìÖ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å Google Calendar')
        .setColor('#00AAFF')
        .setFooter({
          text: `‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ${page + 1} ‡∏à‡∏≤‡∏Å ${pages}`
        })
        .setTimestamp();

      const slice = events.slice(page * 5, page * 5 + 5);
      slice.forEach((event) => {
        const name = event.summary || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°';

        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        const isAllDay = !!event.start.date && !event.start.dateTime;

        let startFormatted;
        let endFormatted = '';

        if (isAllDay) {
          // ‡∏ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô ‡πÅ‡∏™‡∏î‡∏á "‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô"
          startFormatted = '‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô';
        } else {
          // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ó‡∏¢
          const start = event.start.dateTime || event.start.date;
          startFormatted = new Date(start).toLocaleString('th-TH', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: false,
          });

          const end = event.end ?.dateTime || event.end ?.date || '';
          if (end) {
            endFormatted = new Date(end).toLocaleString('th-TH', {
              year: 'numeric',
              month: 'long',
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit',
              hour12: false,
            });
          }
        }

        const location = event.location ? `üìç ${event.location}` : '';
        const desc = event.description ? `\nüìù ${event.description.substring(0, 100)}...` : '';

        embed.addFields({
          name: `üóìÔ∏è ${name}`,
          value: `üïí ${startFormatted}${endFormatted ? ` - ${endFormatted}` : ''}\n${location}${desc}`
        });
      });


      return embed;
    };

    const getButtons = (page) => {
      return new ActionRowBuilder().addComponents(
        new ButtonBuilder()
        .setCustomId('prev_page')
        .setLabel('‚¨ÖÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤')
        .setStyle(ButtonStyle.Secondary)
        .setDisabled(page === 0),

        new ButtonBuilder()
        .setCustomId('next_page')
        .setLabel('‚û°Ô∏è ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ')
        .setStyle(ButtonStyle.Primary)
        .setDisabled(page >= pages - 1),

        new ButtonBuilder()
        .setCustomId(`refresh_page_${interaction.user.id}`)
        .setLabel('üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä')
        .setStyle(ButtonStyle.Success),

        new ButtonBuilder()
        .setCustomId(`close_page_${interaction.user.id}`)
        .setLabel('‚ùå ‡∏õ‡∏¥‡∏î')
        .setStyle(ButtonStyle.Danger)
      );
    };

    await interaction.reply({
      embeds: [getEmbed(currentPage)],
      components: [getButtons(currentPage)],
    });

    const reply = await interaction.fetchReply();

    const collector = reply.createMessageComponentCollector({
      time: 60_000, // 1 ‡∏ô‡∏≤‡∏ó‡∏µ
    });

    collector.on('collect', async i => {
      if (i.user.id !== interaction.user.id) {
        return i.reply({
          content: '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ',
          ephemeral: true
        });
      }

      if (i.customId === `next_page_${interaction.user.id}` && currentPage < pages - 1) {
        currentPage++;
      } else if (i.customId === `prev_page_${interaction.user.id}` && currentPage > 0) {
        currentPage--;
      } else if (i.customId === `refresh_page_${interaction.user.id}`) {
        const refreshed = await fetch(url);
        const newData = await refreshed.json();
        if (!newData.items || newData.items.length === 0) {
          return i.update({
            embeds: [new EmbedBuilder().setTitle('üì≠ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á').setColor('Red')],
            components: []
          });
        }
        events.splice(0, events.length, ...newData.items);
        currentPage = 0;
      } else if (i.customId === `close_page_${interaction.user.id}`) {
        await i.update({
          embeds: [new EmbedBuilder().setTitle('üìï ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß').setColor('Grey')],
          components: []
        });

        client.user.setActivity('‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å User', {
          type: 3
        });

        collector.stop(); // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö interaction
        return;
      }

      await i.update({
        embeds: [getEmbed(currentPage)],
        components: [getButtons(currentPage)],
      });
    });


    collector.on('end', async () => {
      try {
        await interaction.editReply({
          components: [], // ‡∏•‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
        });
      } catch (e) {
        console.error('‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', e);
      }

      // ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏•‡∏±‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ interaction
      client.user.setActivity('‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å User', {
        type: 3
      });
    });
  }

  

});

// Login the bot
client.login(process.env.TOKEN);